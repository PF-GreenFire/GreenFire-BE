<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    <mapper namespace="sisosolsol.greenfire.store.model.dao.StoreMapper">
        <resultMap id="storeListResultMap" type="sisosolsol.greenfire.store.model.dto.StoreListDTO">
            <id property="storeCode" column="store_code"/>
            <result property="createdAt" column="created_at"/>
            <result property="storeName" column="store_name"/>
            <result property="storeStatus" column="store_status"/>
            <result property="storeFoodType" column="store_food_type"/>
            <result property="storeCategoryName" column="store_category_name"/>
            <result property="storeImage" column="file_name"/>
        </resultMap>

        <!--  초록불 장소 목록 조회 TODO: 현재 위치 정보를 기반으로 반경 지도 목록을 보여주는 것으로 수정 예정 -->
        <select id="getStoreList" resultMap="storeListResultMap">
            SELECT
                s.store_code,
                s.created_at,
                s.store_name,
                s.store_status,
                s.store_food_type,
                c.store_category_name AS store_category_name,
                i.file_name AS file_name
            FROM
                tbl_store s
            LEFT JOIN
                tbl_store_category c ON s.store_category_code = c.store_category_code
            LEFT JOIN
                tbl_image i ON i.store_code = s.store_code
            WHERE
                s.store_status = 'APPROVE'
        </select>

</mapper>